# Testing Blacklist - Files Not Requiring Unit Tests

This document lists files that are excluded from unit test coverage requirements and explains why they don't need dedicated unit tests.

## Application Entry Points

### `src/main.ts`
**Coverage: 0%**

**Reason:** Application bootstrap file that only contains NestJS application initialization code. This is better tested through E2E tests rather than unit tests.

**Type:** Entry point
**Lines:** ~29 lines

---

## Database Files

### `src/database/data-source.ts`
**Coverage: 0%**

**Reason:** TypeORM data source configuration file. Contains only configuration, no business logic. Tested implicitly when application runs.

**Type:** Configuration
**Lines:** ~9 lines

### `src/database/migrations/*.ts`
**Coverage: 0%**

**Reason:** Database migration files are auto-generated by TypeORM CLI and contain only SQL schema definitions. These are validated by running migrations, not unit tests.

**Type:** Migration
**Example:** `1762627880274-InitialSchema.ts` (317 lines)

### `src/database/seeds/*.ts`
**Coverage: 0%**

**Reason:** Seed files are utility scripts for populating development/test databases. They are not part of the production application logic and are only run manually.

**Type:** Development utility
**Files:**
- `seed.ts` - Main seed orchestrator
- `user.seed.ts` - User data seeder
- `character-set.seed.ts` - Character set data seeder
- `reset-db.ts` - Database reset utility
- `index.ts` - Seed exports

---

## Module Configuration Files

### `src/app.module.ts`
**Coverage: 0% (but module is tested via app.module.spec.ts)**

**Reason:** Pure module configuration file with no business logic. While module initialization is tested, the file itself contains only decorators and imports.

**Type:** Module configuration
**Note:** Module initialization IS tested, but the file shows 0% because decorators aren't executed as regular code.

### `src/database/database.module.ts`
**Coverage: 0%**

**Reason:** Pure module configuration for database setup. No business logic, only TypeORM configuration.

**Type:** Module configuration

---

## DTO and Response Files

### `src/game/character-sets/dto/*.ts`
**Coverage: 0%**

**Reason:** Pure TypeScript interface/type files used for API contracts. These are compile-time constructs with no runtime logic to test.

**Type:** Type definitions
**Files:**
- `character-response.dto.ts`
- `character-set-response.dto.ts`
- `index.ts`

### `src/auth/dto/auth-response.dto.ts`
**Coverage: 0%**

**Reason:** Pure TypeScript interface for API responses. No runtime logic.

**Type:** Type definition

### `src/auth/types/jwt-payload.type.ts`

**Reason:** TypeScript type definition file. No executable code.

**Type:** Type definition

---

## Guard Files (Tested Implicitly)

### `src/auth/guards/jwt-auth.guard.ts`
**Coverage: 100%**

**Reason:** Simple NestJS guard that extends `@nestjs/passport` AuthGuard. Tested implicitly through integration tests and via strategy tests.

**Type:** Passport guard wrapper

### `src/auth/guards/local-auth.guard.ts`
**Coverage: 100%**

**Reason:** Simple NestJS guard that extends `@nestjs/passport` AuthGuard. Tested implicitly through integration tests and via strategy tests.

**Type:** Passport guard wrapper

---

## Gateway Type Definitions

### `src/game/gateway/types.ts`

**Reason:** Type definition file for Socket.IO typed server/client interfaces. No executable code.

**Type:** Type definition

---

## Complex Business Logic Services (Requires Integration Tests)

The following files have very low unit test coverage (< 20%) because they contain complex business logic that is better validated through integration or E2E tests:

### `src/game/services/game-lobby.service.ts`
**Coverage: 10.07%**
**Lines:** 384 lines

**Reason:** Large, complex service handling lobby management with intricate game state transitions, player management, and database operations. Unit tests would require extensive mocking that wouldn't provide meaningful validation. Better tested through integration tests.

**Recommendation:** Focus on integration/E2E tests for this service.

### `src/game/services/game-play.service.ts`
**Coverage: 8.65%**
**Lines:** 859 lines

**Reason:** Core game engine service with complex game flow logic, turn management, and state validation. The interconnected nature of game rules makes isolated unit testing impractical. Integration tests provide better coverage.

**Recommendation:** Focus on integration/E2E tests for this service.

### `src/game/services/game-stats.service.ts`
**Coverage: 15.62%**
**Lines:** 314 lines

**Reason:** Statistical calculation service with complex game result aggregation. Better validated with real game data through integration tests.

**Recommendation:** Focus on integration/E2E tests for this service.

### `src/auth/ws-auth.adapter.ts`
**Coverage: 0%**
**Lines:** 104 lines

**Reason:** Custom WebSocket authentication adapter that interfaces directly with Socket.IO server internals. Difficult to unit test in isolation without a real Socket.IO server. Better tested through E2E tests.

**Recommendation:** Focus on E2E tests with real WebSocket connections.

---

## Summary

### Files Excluded from Coverage Requirements (0% OK)

**Configuration & Entry Points:**
- `src/main.ts`
- `src/app.module.ts`
- `src/database/data-source.ts`
- `src/database/database.module.ts`

**Database Utilities:**
- All files in `src/database/migrations/`
- All files in `src/database/seeds/`

**Type Definitions:**
- `src/game/character-sets/dto/*.dto.ts`
- `src/auth/dto/auth-response.dto.ts`
- `src/auth/types/*.type.ts`
- `src/game/gateway/types.ts`

**Total:** ~15-20 files

### Files Best Tested via Integration/E2E Tests (Low Unit Coverage Acceptable)

- `src/game/services/game-lobby.service.ts`
- `src/game/services/game-play.service.ts`
- `src/game/services/game-stats.service.ts`
- `src/auth/ws-auth.adapter.ts`

**Total:** 4 large services (~1,700 lines of complex business logic)

---

## Testing Strategy

### Should Have Unit Tests (Target: 80%+ coverage)
- Controllers (✅ 100% achieved)
- Services with isolated business logic (✅ Most services covered)
- Strategies (✅ 100% achieved)
- Smaller, focused services (✅ broadcast, lobby-cleanup covered)
- Validation DTOs with decorators (✅ Covered)

### Should Use Integration Tests
- Complex game engine services
- Database operations with TypeORM
- WebSocket authentication flow
- Multi-service workflows

### Should Use E2E Tests
- Complete game flows (create → join → play → end)
- Authentication flows with JWT
- Real-time Socket.IO event handling
- API endpoint integration

---

**Last Updated:** 2025-11-09
**Coverage Baseline:** 56.79% statements, 54.89% branches
